---
title: Linux 檔案權限介紹
categories: Linux
tags: linux
---
各個元件或裝置在Linux底下都是「一個檔案」，每個檔案都有相當多的屬性與權限，
其中最重要的就是檔案的擁有者與群組的概念了。

### Linux 檔案屬性

先介紹查看檔案的指令：
```
ls -al
```
顯示當前目錄路徑下有什麼檔案與屬性

<!-- more -->

{% asset_img list-file.jpg 查看檔案 %}
> ls是「list」的意思，「-al」選擇表示列出所的的檔案詳細權限與屬性
> 檔名開頭是「.」的表示隱藏檔案

```
-rw-r--r-- 1 chenhsiang chenhsiang 655 Apr 16 14:35 .profile
```

#### 檔案類型與權限
```
-rw-r--r--
```
最重要也最需要注意的就是這裡！這一欄共有十個字元
+ 第一個字元代表這個檔案是`目錄、檔案或連結檔等等`：
    - [d]是目錄，例如上圖的`.cache`那一行
    - [-]是檔案，例如上圖的`.profile`那一行
    - [l]表示為連結檔（link file)
    - [b]表示為裝置檔案內可供儲存的週邊設備(可隨機存取裝置)
    - [c]表示為裝置檔案內的序列埠設備，例如鍵盤、滑鼠（一次性讀取裝置）

+ 接下來的九個字元中，以三個為一組，且均為「rwx」的三個參數組合。「r」代表可讀（read）、「w」代表可寫（write）、「x」代表可執行（execute）。這三個權限的位置不會改變，如果沒有權限，裝會出現「-」。
    - 第一組為「檔案擁有者可具備的權限」，以上圖的「.profile」檔案為例，它的擁有者可以讀寫但不可執行
    - 第二組為「加入此群組帳號的權限」
    - 第三組為「非本人且沒有加入本群組的其它帳號的權限」

#### 檔案權限的重要性
Linux 檔案系統的每個檔案都加了很多屬性，最大的用途是在「資料安全性」

##### 系統保護的功能
例如帳號管理的檔案`/etc/shadow`，紀錄系統中所有帳號資料，因此只有root能讀取，該檔案的權限就會是「----------」，看起來像是所有人都不能使用，但root不受系統的權限限制，所以不管什麼檔案權限，root都可以存取。

##### 團隊開發軟體或資料共用的功能
如果希望每個在團隊的人都可以使用某個目錄下的檔案，而非團隊的人則不能存取，
就可以先檔案權限設定為「-rwxrws---」提供給同一個Group使用。
> 上面的`s`屬性是Set GID(SGID)的意思，只對目錄有效
> 1. 目錄被設置後，任何用戶在此目錄下建立的文件，所屬群組皆與該目錄所屬的群組相同
> 2. 可使用在特定多人團隊的專案開發上

##### 未將權限設定妥當的危害
如果目錄權限沒有設定好，可能造成其它人都可以在你的系統上隨意操作，
因此修改Linux檔案與目錄的屬性前，一定要先搞清楚，什麼資料是可變的，什麼是不可變的！